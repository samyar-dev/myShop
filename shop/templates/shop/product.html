{% extends 'parent/base.html' %}
{% load static %}
{% load humanize %}
{% block title %} {{ product.name }} {% endblock %}
{% block head %}
    <link rel="stylesheet" href="{% static 'css/prod-detail.css' %}">
{% endblock %}
{% block content %}

<header>
  <div class="header-container">
    <a href="#" class="logo">Ø¬ÙˆØ§Ù‡Ø±Ø§Øª Ø³ÙØ±Ø§ÛŒ Ø²ÙØ±</a>

    <div class="search-box">
      <input type="text" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ú¯Ø±Ø¯Ù†Ø¨Ù†Ø¯ØŒ Ø§Ù†Ú¯Ø´ØªØ±ØŒ Ø¯Ø³ØªØ¨Ù†Ø¯ Ø·Ù„Ø§ÛŒÛŒ...">
    </div>

    <div class="right-section">
      <a href="#" class="icon-btn">ğŸ›ï¸</a>
      <a href="#" class="icon-btn">ğŸ‘¤</a>
    </div>
  </div>
</header>

<section class="product-section">
  <div class="product-container">

    <div class="product-image">
      <img src="{{ product.images.first.image_file.url }}" alt="{{ product.name }}">
    </div>

    <div class="product-info">
      <div>
        <h2>Ú¯Ø±Ø¯Ù†Ø¨Ù†Ø¯ Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø± Ø·Ø±Ø­ Ú©Ù„Ø§Ø³ÛŒÚ©</h2>
        <p>
          Ú¯Ø±Ø¯Ù†Ø¨Ù†Ø¯ Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø± Ø¨Ø§ Ø·Ø±Ø§Ø­ÛŒ Ù„ÙˆÚ©Ø³ Ùˆ Ø¸Ø±ÛŒÙØŒ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø±ÙˆØ²Ù…Ø±Ù‡ Ùˆ Ù…Ø¬Ø§Ù„Ø³ Ø±Ø³Ù…ÛŒ.
          Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ø³Ø§Ø®Øª Ùˆ Ø¯Ø±Ø®Ø´Ù†Ø¯Ú¯ÛŒ Ù…Ø§Ù†Ø¯Ú¯Ø§Ø±.
        </p>
        <div class="price">Û²Û´,Û¸Û°Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</div>
      </div>

      <button class="buy-btn">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>

      <button class="like-btn">
        {% if request.user in product.liked_by.all %}
            â™¡
        {% else %}
            â¤ï¸
        {% endif %}
      </button>
    </div>

  </div>
</section>

<script>
    let likeBtn = document.querySelector('.like-btn');
    likeBtn.addEventListener('click', function(){
        fetch('{% url "shop:like_view" product.id %}', {
            method: 'POST',
            headers: {"X-CSRFToken": '{{ csrf_token }}', "Content-Type": "application/json"},
        }).then(data => {return data.json()})
        .then(function(data){
            if (data.liked){
                likeBtn.innerHTML = 'â™¡'
            } else {
                likeBtn.innerHTML = 'â¤ï¸'
            }
        })
    })
</script>

{% endblock %}